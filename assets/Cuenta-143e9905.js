import{j as e,F as m,aK as x,a,ay as i,aL as c,M as l,P as g,aM as f,ab as R,aN as T,aB as P,aO as N,aP as u,a3 as p,aQ as C,aR as z,aS as D,aT as B}from"./@mui-94e45ada.js";import{r as k}from"./react-19ede8c0.js";import{S as L,B as U}from"./Breadcrumb-c4cf427b.js";import{S as h}from"./SimpleCard-cc9110a7.js";import{u as V}from"./formik-bccae489.js";import{s as v,b as I,a as w}from"./swal-6db6c20f.js";import{g as S,G as b}from"./graphql-request-396d023b.js";import{A,u as O}from"./index-a032e14e.js";import{s as q,c as G,a as E,b as $}from"./yup-861a4b8a.js";import{e as F}from"./yup-locales-e98f4908.js";import{H as d}from"./Typography-c4fd38d1.js";import"./react-is-e5978b8b.js";import"./@emotion-01c0502c.js";import"./hoist-non-react-statics-6e7e3bdb.js";import"./@babel-41a3dc83.js";import"./stylis-79144faa.js";import"./react-transition-group-07c33d75.js";import"./react-dom-308b05ff.js";import"./scheduler-765c72db.js";import"./@popperjs-f3391c26.js";import"./jss-4560bbb1.js";import"./is-in-browser-9e40da8a.js";import"./jss-plugin-rule-value-function-275843d2.js";import"./jss-plugin-global-96037998.js";import"./jss-plugin-nested-279c4525.js";import"./jss-plugin-camel-case-92f9f32c.js";import"./hyphenate-style-name-80972348.js";import"./jss-plugin-default-unit-80d6b696.js";import"./jss-plugin-vendor-prefixer-711b305d.js";import"./css-vendor-f41dfb6e.js";import"./jss-plugin-props-sort-0c9fca2f.js";import"./react-router-dom-c0e9fbdc.js";import"./react-router-11fb21ef.js";import"./@remix-run-d753ad9e.js";import"./lodash-es-87d1a1d5.js";import"./react-fast-compare-6dbc5b30.js";import"./tiny-warning-c932d744.js";import"./react-toastify-ac6b7c37.js";import"./clsx-1229b3e0.js";import"./sweetalert2-b5adf0ab.js";import"./form-data-c8368213.js";import"./extract-files-b993d67a.js";import"./graphql-9eaaa955.js";import"./cross-fetch-ff4a750f.js";import"./rc-input-number-5ce3f958.js";import"./classnames-e62508ea.js";import"./rc-util-f84322a6.js";import"./@rc-component-9042d6d8.js";/* empty css                     */import"./react-datepicker-b19bab85.js";import"./date-fns-66b136a8.js";import"./react-onclickoutside-a7243ba6.js";import"./react-popper-4d77a87f.js";import"./warning-4834017b.js";import"./react-redux-0edfc849.js";import"./use-sync-external-store-b3a8aa83.js";import"./lodash-c8b5ff2a.js";import"./jwt-decode-9c18df67.js";import"./nanoid-bef4f1f3.js";import"./@reduxjs-e99b2c47.js";import"./immer-41fd5235.js";import"./redux-5bd193e3.js";import"./redux-thunk-ef899f4c.js";import"./@tanstack-464f39f1.js";import"./property-expr-38205fa5.js";import"./tiny-case-d0726479.js";import"./toposort-85f95ecf.js";const M=S`
  mutation CAMBIAR_PASSWORD($password: String!, $nuevoPassword: String!) {
    usuarioCambiarPassword(password: $password, nuevoPassword: $nuevoPassword)
  }
`,H=async n=>{const r=new b("https://sandbox.isipass.net/api"),o=localStorage.getItem(A);return r.setHeader("authorization",`Bearer ${o}`),(await r.request(M,{password:n.password,nuevoPassword:n.nuevoPassword})).usuarioCambiarPassword};q(F);const W=G({password:E().required(),nuevoPassword:E().min(8).required(),nuevoPassword2:E().min(8).oneOf([$("nuevoPassword")],"Las nuevas contraseñas deben ser idénticas.").required()}),j=n=>{const r=V({initialValues:{password:"",nuevoPassword:"",nuevoPassword2:""},validationSchema:W,onSubmit:async o=>{await v({preConfirm:()=>H(o).catch(t=>(w(t),!1)),text:"¿Confirma que desea cambiar la contraseña?"}).then(t=>{t.isConfirmed&&I("Se ha cambiado la contraseña correctamente, esta se aplica a partir del proximo reinicio de sesión")})}});return e(m,{children:e(h,{title:"CAMBIAR CONTRASEÑA",childIcon:e(x,{}),children:a(i,{container:!0,spacing:2,children:[e(i,{item:!0,lg:6,md:6,xs:12,children:e("form",{onSubmit:r.handleSubmit,children:a(i,{container:!0,spacing:2,rowSpacing:3,children:[e(i,{item:!0,xs:12,children:e(c,{fullWidth:!0,children:e(l,{name:"password",type:"password",label:"Ingrese su contraseña",value:r.values.password,variant:"outlined",size:"small",onChange:r.handleChange,error:r.touched.password&&!!r.errors.password,helperText:r.touched.password&&r.errors.password})})}),e(i,{item:!0,xs:12,children:e(c,{fullWidth:!0,children:e(l,{name:"nuevoPassword",type:"password",label:"Ingrese su nueva contraseña",value:r.values.nuevoPassword,variant:"outlined",size:"small",onChange:r.handleChange,error:r.touched.nuevoPassword&&!!r.errors.nuevoPassword,helperText:r.touched.nuevoPassword&&r.errors.nuevoPassword})})}),e(i,{item:!0,xs:12,children:e(c,{fullWidth:!0,children:e(l,{name:"nuevoPassword2",type:"password",label:"Confirme su nueva contraseña",value:r.values.nuevoPassword2,variant:"outlined",size:"small",onChange:r.handleChange,error:r.touched.nuevoPassword2&&!!r.errors.nuevoPassword2,helperText:r.touched.nuevoPassword2&&r.errors.nuevoPassword2})})}),e(i,{item:!0,xs:12,children:e(g,{variant:"contained",type:"submit",children:"Guardar Cambios"})})]})})}),e(i,{item:!0,lg:6,md:6,xs:12})]})})})},Q=n=>{const{user:r}=O();return e(m,{children:e(h,{title:"PERFIL DE USUARIO",childIcon:e(f,{}),children:a(i,{container:!0,spacing:2,children:[e(i,{item:!0,lg:6,md:6,xs:12,children:e(c,{fullWidth:!0,children:e(l,{label:"Nombres",value:r.nombres,variant:"outlined",size:"small"})})}),e(i,{item:!0,lg:6,md:6,xs:12,children:e(c,{fullWidth:!0,children:e(l,{label:"Apellidos",value:r.apellidos,variant:"outlined",size:"small"})})}),e(i,{item:!0,lg:6,md:6,xs:12,children:e(c,{fullWidth:!0,children:e(l,{label:"Cargo",value:r.cargo,variant:"outlined",size:"small"})})}),e(i,{item:!0,lg:6,md:6,xs:12,children:e(c,{fullWidth:!0,children:e(l,{label:"Rol Operaciones",value:r.rol,variant:"outlined",size:"small"})})}),a(i,{item:!0,lg:12,md:12,xs:12,children:[e(d,{children:"Restricción de accesos"}),r.dominio.map(o=>e(R,{label:o,variant:"outlined"},o))]})]})})})},_=S`
  mutation CLEAR_CACHE {
    clearCache
  }
`,J=async()=>{const n=new b("https://sandbox.isipass.net/api"),r=localStorage.getItem(A);return n.setHeader("authorization",`Bearer ${r}`),(await n.request(_)).clearCache},K=n=>e(m,{children:e(h,{title:"RECARGAR CACHE",childIcon:e(f,{}),children:a(i,{container:!0,spacing:2,children:[a(i,{item:!0,lg:12,md:12,xs:12,children:[e(d,{children:"Ventajas de realizar este proceso"}),a("ol",{children:[e("li",{children:"Eliminar datos temporales que consumen espacio en memoria"}),e("li",{children:"Mejorar el rendimiento de consultas y envio de datos"}),e("li",{children:"Ejecutar la acción no hará que pierda la sesión"})]})]}),e(i,{item:!0,lg:12,md:12,xs:12,children:e(g,{variant:"contained",onClick:async()=>{await v({preConfirm:()=>J().catch(o=>(w(o),!1))}).then(o=>{o.isConfirmed&&I("Recarga de cache exitosa")})},children:"EJECUTAR SERVICIO"})})]})})}),Y=S`
  mutation SYNC_CATALOGOS {
    syncCatalogos
  }
`,Z=async()=>{const n=new b("https://sandbox.isipass.net/api"),r=localStorage.getItem(A);return n.setHeader("authorization",`Bearer ${r}`),(await n.request(Y)).syncCatalogos},X=S`
  mutation SYNC_CUFD {
    syncCufd(forzarActualizacion: 1) {
      codigo
      codigoControl
      direccion
      fechaInicial
      fechaVigencia
    }
  }
`,ee=async()=>{const n=new b("https://sandbox.isipass.net/api"),r=localStorage.getItem(A);return n.setHeader("authorization",`Bearer ${r}`),(await n.request(X)).syncCufd},re=n=>e(m,{children:e(h,{title:"SINCRONIZACIÓN DE DATOS",childIcon:e(f,{}),children:a(i,{container:!0,spacing:2,children:[a(i,{item:!0,lg:12,md:12,xs:12,children:[e(d,{children:"Sincronización de CÓDIGO ÚNICO DE FACTURACION DIARIA (CUFD)"}),e("ol",{children:e("li",{children:"Nos permite poder emitir documentos fiscales durante el día"})})]}),e(i,{item:!0,lg:12,md:12,xs:12,children:e(g,{variant:"contained",size:"small",onClick:async()=>{await v({preConfirm:()=>ee().catch(t=>(w(t),!1))}).then(t=>{t.isConfirmed&&I("CUFD se ha sincronizado correctamente")})},children:"EJECUTAR SERVICIO CUFD"})}),a(i,{item:!0,lg:12,md:12,xs:12,children:[e(d,{children:"Sincronización de CATÁLOGOS"}),a("ol",{children:[e("li",{children:"Sincroniza todos los catalogos y clasificadores del sin."}),e("li",{children:"Este proceso puede demorar varios minutos dependiente de la conexion de internet y la diponibilidad de IMPUESTOS NACIONALES."}),e("li",{children:"Sincronización de: metodos pago, actividades, tipo punto venta, tipo Emision, producto servicio, tipo moneda, actividades por documento sector, tipo de factura, tipo documento identidad, motivo anulación, pais."})]})]}),e(i,{item:!0,lg:12,md:12,xs:12,children:e(g,{variant:"contained",size:"small",onClick:async()=>{await v({text:"Confirma que desea realizar la acción, este proceso podria demorar varios minutos",preConfirm:()=>Z().catch(t=>(w(t),!1))}).then(t=>{t.isConfirmed&&I("Sincronización realizada correctamente")})},children:"EJECUTAR SERVICIO CATÁLOGOS"})})]})})}),ae=n=>{const{user:r}=O();return e(m,{children:a(h,{title:"SUCURSAL / PUNTO VENTA / ACTIVIDAD ECONÓMICA",childIcon:e(T,{}),children:[a("div",{className:"responsive-table",style:{marginBottom:25},children:[e(d,{children:"SUCURSAL"}),a("table",{children:[e("thead",{children:a("tr",{children:[e("th",{style:{width:150},children:"CÓDIGO"}),e("th",{children:"DIRECCIÓN"}),e("th",{children:"TELEFONO"}),e("th",{children:"DEPARTAMENTO"})]})}),e("tbody",{children:a("tr",{children:[e("td",{"data-label":"CÓDIGO",children:r.sucursal.codigo}),e("td",{"data-label":"DIRECCIÓN",children:r.sucursal.direccion}),e("td",{"data-label":"TELEFONO",children:r.sucursal.telefono}),e("td",{"data-label":"DEPARTAMENTO",children:r.sucursal.departamento.departamento})]})})]})]}),a("div",{className:"responsive-table",style:{marginBottom:25},children:[e(d,{children:"PUNTO VENTA"}),a("table",{children:[e("thead",{children:a("tr",{children:[e("th",{style:{width:150},children:"CÓDIGO"}),e("th",{children:"NOMBRE"}),e("th",{children:"TIPO"})]})}),e("tbody",{children:a("tr",{children:[e("td",{"data-label":"CÓDIGO",children:r.puntoVenta.codigo}),e("td",{"data-label":"NOMBRE",children:r.puntoVenta.nombre}),e("td",{"data-label":"TIPO",children:r.puntoVenta.tipoPuntoVenta.descripcion})]})})]})]}),a("div",{className:"responsive-table",style:{marginBottom:25},children:[e(d,{children:"ACTIVIDAD ECONÓMICA"}),a("table",{children:[e("thead",{children:a("tr",{children:[e("th",{style:{width:150},children:"CÓDIGO CAEB"}),e("th",{children:"DESCRIPCIÓN"}),e("th",{children:"TIPO"})]})}),e("tbody",{children:a("tr",{children:[e("td",{"data-label":"CÓDIGO CAEB",children:r.actividadEconomica.codigoCaeb}),e("td",{"data-label":"DESCRIPCIÓN",children:r.actividadEconomica.descripcion}),e("td",{"data-label":"TIPO",children:r.actividadEconomica.tipoActividad})]})})]})]})]})})},gr=n=>{const[r,o]=k.useState(0),t=(s,y)=>{o(y)};return e(m,{children:a(L,{children:[e("div",{className:"breadcrumb",children:e(U,{routeSegments:[{name:"Gestión"}]})}),a(i,{container:!0,spacing:2,columnSpacing:5,children:[e(i,{item:!0,sm:4,xs:12,children:e(h,{children:e(P,{sx:{width:"100%",bgcolor:"background.paper"},children:a(N,{component:"nav","aria-label":"main mailbox folders",children:[a(u,{selected:r===0,onClick:s=>t(s,0),children:[e(p,{children:e(f,{})}),e(C,{primary:"Información Básica"})]}),a(u,{selected:r===1,onClick:s=>t(s,1),children:[e(p,{children:e(x,{})}),e(C,{primary:"Cambiar Contraseña"})]}),a(u,{selected:r===2,onClick:s=>t(s,2),children:[e(p,{children:e(z,{})}),e(C,{primary:"Sucursal / Punto Venta"})]}),a(u,{selected:r===3,onClick:s=>t(s,3),children:[e(p,{children:e(D,{})}),e(C,{primary:"Sincronización"})]}),a(u,{selected:r===4,onClick:s=>t(s,4),children:[e(p,{children:e(B,{})}),e(C,{primary:"Recargar Cache"})]})]})})})}),a(i,{item:!0,sm:7,xs:12,children:[r===0&&e(Q,{}),r===1&&e(j,{}),r===2&&e(ae,{}),r===3&&e(re,{}),r===4&&e(K,{})]})]}),e(P,{py:"12px"})]})})};export{gr as default};
